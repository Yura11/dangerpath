name: Build project

on: [push, pull_request]

jobs:
    buildForAllSupportedPlatforms:
        name: Build for ${{ matrix.targetPlatform }}
        runs-on: ubuntu-latest
        strategy:
            fail-fast: false
            matrix:
                targetPlatform:
                    - StandaloneWindows64 # Build a Windows 64-bit standalone.
        steps:
            - uses: actions/checkout@v2
              with:
                  fetch-depth: 0
                  lfs: true
            - uses: actions/cache@v2
              with:
                  path: Library
                  key: Library-${{ matrix.targetPlatform }}
                  restore-keys: Library-
            - uses: game-ci/unity-builder@v2
              env:
                  UNITY_LICENSE: <?xml version="1.0" encoding="UTF-8"?><root><TimeStamp Value="pWVgE1un1zLWfg=="/> <License id="Terms"> <MachineBindings> <Binding Key="1" Value="00326-10000-00000-AA374"/> <Binding Key="2" Value="0062B_67_8C415B_F7.5"/> <Binding Key="4" Value="U3lzdGVtIFNlcmlhbCBOdW1iZXI="/> <Binding Key="5" Value="04:d4:c4:4c:b0:5e"/> </MachineBindings> <MachineID Value="S0a4rgTMzdAk1SsnsF//r6CVTFU="/> <SerialHash Value="d0f8eb6c680ede95bdbd8a71d360a282828f7dc5"/> <Features> <Feature Value="33"/> <Feature Value="1"/> <Feature Value="12"/> <Feature Value="2"/> <Feature Value="24"/> <Feature Value="3"/> <Feature Value="36"/> <Feature Value="17"/> <Feature Value="19"/> <Feature Value="62"/> </Features> <DeveloperData Value="AQAAAEY0LTlIN04tV1FDUC1HN0RBLTI3SjItOFJBOA=="/> <SerialMasked Value="F4-9H7N-WQCP-G7DA-27J2-XXXX"/> <StartDate Value="2023-06-17T00:00:00"/> <UpdateDate Value="2023-12-29T17:50:10"/> <InitialActivationDate Value="2023-06-17T09:09:18"/> <LicenseVersion Value="6.x"/> <ClientProvidedVersion Value="2017.2.0"/> <AlwaysOnline Value="false"/> <Entitlements> <Entitlement Ns="unity_editor" Tag="UnityPersonal" Type="EDITOR" ValidTo="9999-12-31T00:00:00"/> <Entitlement Ns="unity_editor" Tag="DarkSkin" Type="EDITOR_FEATURE" ValidTo="9999-12-31T00:00:00"/> </Entitlements> </License><Signature xmlns="http://www.w3.org/2000/09/xmldsig#"><SignedInfo><CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments"/><SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/><Reference URI="#Terms"><Transforms><Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/></Transforms><DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><DigestValue>KY/euRdYFr015ESsrnvIFMmIn/U=</DigestValue></Reference></SignedInfo><SignatureValue>k56HKDWv5qhy40oK9XTtLl1TJ/E1FKqtOcGakrtbmL3e+vLvLPu6aE+TlsZoQ3yt4K2UWTx2xPpV rd+6cafJuJEF6PjLFaODsHliEekYJf4bko9Ih/vYW0K+G+fRkux7ooZc0Vr0xVatre7E7+CXD3MK sWDf6TQIwDPCULQrWEuGh0CqHWR4Re1dl8IlLyVdrZnlMlTH3Aectb0/yo5PqN/hD3/L20FRD9xiVQArTBAjzmgAyk/nVn2EBNC9cje8iFD3b/iV4qnUmYCFIPJB81nMMad+J/xygaQ2ZTmnAhyb78Vb DeB2Mxl1wUIq6LzUbkMnSG+ScBprPLHwlbknoQ==</SignatureValue></Signature></root>  
              with:
                  targetPlatform: ${{ matrix.targetPlatform }}
            - uses: actions/upload-artifact@v2
              with:
                  name: Build-${{ matrix.targetPlatform }}
                  path: build/${{ matrix.targetPlatform }}
